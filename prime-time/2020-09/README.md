# Timing GMP vs OpenPFGW
Testing performed on a Ryzen 3900X (2020-09 results are with a i7-2600K)

## Commands

Run all

```shell
$ g++ gmp-test.cpp -lgmp -o gmp-test
$ time for fn in *.txt; do
    echo -e "\nRunning '$fn'";
    time ./gmp-test $fn |& tee ${fn%.*}.gmp.log;
done
```
```
Running 'power_tests.txt'
Compiled with GMP 6.2.99
10^48 + 7 => composite (0.000037 seconds)
10^116 + 7 => composite (0.000053 seconds)
10^204 + 7 => composite (0.000164 seconds)
10^424 + 7 => composite (0.001079 seconds)
10^960 + 7 => composite (0.009282 seconds)
...
(takes ~45mins (~500s on final power_test prime)
```
```
$ rm -f pfgw-prime.log pfgw.log pfgw.ini *.pfgw.log *.pfr
$ time for fn in *.txt; do
    echo -e "\nRunning '$fn'";
    time ./pfgw64 -f0 "$fn" -l"${fn%.*}.pfgw.log"
done
```

```
Running 'power_primes.txt'
PFGW Version 4.0.1.64BIT.20191203.x86_Dev [GWNUM 29.8]

Output logging to file power_tests.pfgw.log
No factoring at all, not even trivial division
Switching to Exponentiating using GMP
Switching to Exponentiating using Woltman FFT's
Switching to Exponentiating using GMP
10^60 + 7 is 3-PRP! (0.0000s+0.0001s)
10^110 + 7 is 3-PRP! (0.0000s+0.0001s)
10^134 + 7 is 3-PRP! (0.0000s+0.0000s)
Switching to Exponentiating using Woltman FFT's
10^222 + 7 is 3-PRP! (0.0012s+0.0000s)
10^412 + 7 is 3-PRP! (0.0022s+0.0000s)
10^700 + 7 is 3-PRP! (0.0052s+0.0000s)
10^999 + 7 is 3-PRP! (0.0088s+0.0001s)
...
(takes ~4.5 minutes)
```

Final create the README.md tables with

```
$ python create_table.py
```

## Power Numbers (10^P + {3,7,9})

**NOTE:** GMP performs multiple tests for primality not just 3-PRP (hence longer runtime for primes)

| Number          | Bits   | Prime     | PFGW       | GMP 6.2    | Ratio |
|-----------------|--------|-----------|------------|------------|-------|
| 10^48 + 7       | 159    | composite | 0.0001     | 0.000037   |   0.2 |
| 10^116 + 7      | 385    | composite | 0.0000     | 0.000053   |   0.5 |
| 10^204 + 7      | 678    | composite | 0.0028     | 0.000164   |   0.1 |
| 10^424 + 7      | 1408   | composite | 0.0025     | 0.001079   |   0.4 |
| 10^960 + 7      | 3189   | composite | 0.0085     | 0.009282   |   1.1 |
| 10^1370 + 7     | 4551   | composite | 0.0157     | 0.016068   |   1.0 |
| 10^2645 + 7     | 8786   | composite | 0.0572     | 0.076903   |   1.3 |
| 10^4590 + 7     | 15248  | composite | 0.1533     | 0.316686   |   2.1 |
| 10^5499 + 7     | 18267  | composite | 0.2314     | 0.495661   |   2.1 |
| 10^7639 + 7     | 25376  | composite | 0.4309     | 1.154922   |   2.7 |
| 10^10488 + 7    | 34840  | composite | 0.9175     | 2.591064   |   2.8 |
| 10^14592 + 7    | 48474  | composite | 1.7132     | 5.695561   |   3.3 |
| 10^17922 + 7    | 59536  | composite | 2.7844     | 9.173651   |   3.3 |
| 10^21070 + 7    | 69993  | composite | 4.2889     | 13.577067  |   3.2 |
| 10^27031 + 7    | 89795  | composite | 6.9222     | 24.039907  |   3.5 |
| 10^31546 + 7    | 104794 | composite | 8.4585     | 33.652319  |   4.0 |
| 10^43309 + 7    | 143869 | composite | 17.6912    | 71.987402  |   4.1 |
| 10^50340 + 7    | 167226 | composite | 21.6303    | 106.123025 |   4.9 |
| 10^60 + 7       | 199    | prime     | 0.0000     | 0.000064   |   0.6 |
| 10^110 + 7      | 365    | prime     | 0.0000     | 0.000120   |   1.2 |
| 10^134 + 7      | 445    | prime     | 0.0000     | 0.000171   |   1.7 |
| 10^222 + 7      | 737    | prime     | 0.0012     | 0.000574   |   0.4 |
| 10^412 + 7      | 1369   | prime     | 0.0022     | 0.002517   |   1.1 |
| 10^700 + 7      | 2325   | prime     | 0.0052     | 0.010789   |   2.0 |
| 10^999 + 7      | 3319   | prime     | 0.0088     | 0.027159   |   3.1 |
| 10^1383 + 7     | 4594   | prime     | 0.0165     | 0.064292   |   3.9 |
| 10^2607 + 3     | 8660   | prime     | 0.0590     | 0.338656   |   5.7 |
| 10^2730 + 9     | 9069   | prime     | 0.0617     | 0.407647   |   6.6 |
| 10^2841 + 9     | 9438   | prime     | 0.0640     | 0.459542   |   7.2 |
| 10^4562 + 9     | 15155  | prime     | 0.1593     | 1.518628   |   9.5 |
| 10^5076 + 7     | 16862  | prime     | 0.2267     | 1.873071   |   8.3 |
| 10^5543 + 7     | 18413  | prime     | 0.2524     | 2.325095   |   9.2 |
| 10^6344 + 7     | 21074  | prime     | 0.2868     | 3.370307   |  11.7 |
| 10^7668 + 3     | 25473  | prime     | 0.4499     | 5.449296   |  12.1 |
| 10^10470 + 3    | 34781  | prime     | 0.9599     | 11.804974  |  12.3 |
| 10^11021 + 3    | 36611  | prime     | 1.0159     | 13.456534  |  13.2 |
| 10^14600 + 7    | 48500  | prime     | 1.8011     | 27.031949  |  15.0 |
| 10^15093 + 7    | 50138  | prime     | 1.8614     | 29.069579  |  15.6 |
| 10^17753 + 3    | 58974  | prime     | 2.8710     | 43.265882  |  15.1 |
| 10^21717 + 7    | 72142  | prime     | 4.5956     | 72.710026  |  15.8 |
| 10^23636 + 7    | 78517  | prime     | 5.1772     | 88.086732  |  17.0 |
| 10^26927 + 3    | 89450  | prime     | 7.1215     | 124.502622 |  17.5 |
| 10^30221 + 7    | 100392 | prime     | 8.2243     | 157.922874 |  19.2 |
| 10^31810 + 9    | 105671 | prime     | 8.9278     | 189.072431 |  21.2 |
| 10^43186 + 9    | 143461 | prime     | 18.5260    | 385.798086 |  20.8 |
| 10^48109 + 9    | 159815 | prime     | 21.5600    | 497.448395 |  23.1 |
| 10^50711 + 7    | 168458 | prime     | 21.3380    | 519.941478 |  24.4 |


## Primorial Numbers (P# + 1)

**Same 4-5x slowdown for primes as note as above**

| Number          | Bits   | Prime     | PFGW       | GMP 6.2    | Ratio |
|-----------------|--------|-----------|------------|------------|-------|
| 31# +1          | 38     | prime     | 0.0000     | 0.000051   |   0.5 |
| 379# +1         | 509    | prime     | 0.0000     | 0.000569   |   5.7 |
| 1019# +1        | 1410   | prime     | 0.0024     | 0.006064   |   2.4 |
| 1021# +1        | 1420   | prime     | 0.0022     | 0.003221   |   1.4 |
| 2657# +1        | 3704   | prime     | 0.0104     | 0.038207   |   3.6 |
| 3229# +1        | 4544   | prime     | 0.0154     | 0.064536   |   4.2 |
| 4547# +1        | 6438   | prime     | 0.0275     | 0.161496   |   5.9 |
| 11549# +1       | 16447  | prime     | 0.1711     | 1.827198   |  10.7 |
| 13649# +1       | 19470  | prime     | 0.2538     | 2.841871   |  11.2 |
| 18523# +1       | 26580  | prime     | 0.4489     | 6.182994   |  13.8 |
| 23801# +1       | 34124  | prime     | 0.8975     | 11.849030  |  13.2 |
| 42209# +1       | 60595  | prime     | 2.8431     | 47.563971  |  16.7 |

| Number          | Bits   | Prime     | PFGW       | GMP 6.2    | Ratio |
|-----------------|--------|-----------|------------|------------|-------|
| 503# -617       | 694    | composite | 0.0011     | 0.000214   |   0.2 |
| 503# -631       | 694    | composite | 0.0009     | 0.000186   |   0.2 |
| 503# -641       | 694    | composite | 0.0010     | 0.000185   |   0.2 |
| 503# -647       | 694    | composite | 0.0010     | 0.000183   |   0.2 |
| 503# -659       | 694    | prime     | 0.0009     | 0.001232   |   1.2 |
| 503# +577       | 694    | composite | 0.0009     | 0.000200   |   0.2 |
| 503# +593       | 694    | composite | 0.0009     | 0.000184   |   0.2 |
| 503# +599       | 694    | composite | 0.0009     | 0.000183   |   0.2 |
| 503# +601       | 694    | composite | 0.0009     | 0.000182   |   0.2 |
| 503# +631       | 694    | prime     | 0.0009     | 0.001200   |   1.2 |
| 1009# -2719     | 1390   | composite | 0.0020     | 0.001136   |   0.5 |
| 1009# -2729     | 1390   | composite | 0.0020     | 0.001138   |   0.5 |
| 1009# -2749     | 1390   | composite | 0.0020     | 0.001144   |   0.5 |
| 1009# -2753     | 1390   | composite | 0.0020     | 0.001134   |   0.5 |
| 1009# -2767     | 1390   | prime     | 0.0020     | 0.003740   |   1.8 |
| 1009# +1231     | 1390   | composite | 0.0020     | 0.000491   |   0.2 |
| 1009# +1249     | 1390   | composite | 0.0020     | 0.000488   |   0.2 |
| 1009# +1259     | 1390   | composite | 0.0019     | 0.000489   |   0.2 |
| 1009# +1283     | 1390   | composite | 0.0020     | 0.000493   |   0.2 |
| 1009# +1289     | 1390   | prime     | 0.0020     | 0.002771   |   1.3 |
| 3001# -3631     | 4242   | composite | 0.0126     | 0.011657   |   0.9 |
| 3001# -3671     | 4242   | composite | 0.0125     | 0.011735   |   0.9 |
| 3001# -3673     | 4242   | composite | 0.0126     | 0.011850   |   0.9 |
| 3001# -3677     | 4242   | composite | 0.0124     | 0.011737   |   0.9 |
| 3001# -3709     | 4242   | prime     | 0.0127     | 0.058305   |   4.6 |
| 3001# +4649     | 4242   | composite | 0.0125     | 0.011814   |   0.9 |
| 3001# +4651     | 4242   | composite | 0.0127     | 0.011739   |   0.9 |
| 3001# +4663     | 4242   | composite | 0.0125     | 0.011735   |   0.9 |
| 3001# +4673     | 4242   | composite | 0.0125     | 0.011787   |   0.9 |
| 3001# +4691     | 4242   | prime     | 0.0127     | 0.058386   |   4.6 |
| 10007# -10009   | 14290  | composite | 0.1435     | 0.260319   |   1.8 |
| 10007# -10061   | 14290  | composite | 0.1439     | 0.260251   |   1.8 |
| 10007# -10079   | 14290  | composite | 0.1442     | 0.260516   |   1.8 |
| 10007# -10093   | 14290  | composite | 0.1439     | 0.260408   |   1.8 |
| 10007# -10103   | 14290  | composite | 0.1438     | 0.260601   |   1.8 |
| 10007# -12251   | 14290  | composite | 0.1444     | 0.260253   |   1.8 |
| 10007# -12253   | 14290  | composite | 0.1439     | 0.260215   |   1.8 |
| 10007# -12263   | 14290  | composite | 0.1436     | 0.259633   |   1.8 |
| 10007# -12329   | 14290  | composite | 0.1437     | 0.259909   |   1.8 |
| 10007# -12343   | 14290  | prime     | 0.1438     | 1.237671   |   8.6 |
| 10007# +10009   | 14290  | composite | 0.1443     | 0.259095   |   1.8 |
| 10007# +10039   | 14290  | composite | 0.1437     | 0.258270   |   1.8 |
| 10007# +10133   | 14290  | composite | 0.1436     | 0.259090   |   1.8 |
| 10007# +10141   | 14290  | composite | 0.1441     | 0.258578   |   1.8 |
| 10007# +10159   | 14290  | composite | 0.1438     | 0.258402   |   1.8 |
| 10007# +15877   | 14290  | composite | 0.1442     | 0.259090   |   1.8 |
| 10007# +15881   | 14290  | composite | 0.1442     | 0.258836   |   1.8 |
| 10007# +15901   | 14290  | composite | 0.1437     | 0.281936   |   2.0 |
| 10007# +15913   | 14290  | composite | 0.1426     | 0.260377   |   1.8 |
| 10007# +15919   | 14290  | prime     | 0.1431     | 1.312240   |   9.2 |
| 20011# -20029   | 28587  | composite | 0.5906     | 1.540038   |   2.6 |
| 20011# -20063   | 28587  | composite | 0.5901     | 1.542911   |   2.6 |
| 20011# -20101   | 28587  | composite | 0.5911     | 1.541143   |   2.6 |
| 20011# -20107   | 28587  | composite | 0.5935     | 1.535832   |   2.6 |
| 20011# -20143   | 28587  | composite | 0.5912     | 1.533350   |   2.6 |
| 20011# -37889   | 28587  | composite | 0.5934     | 1.531887   |   2.6 |
| 20011# -37957   | 28587  | composite | 0.5921     | 1.530921   |   2.6 |
| 20011# -37963   | 28587  | composite | 0.5925     | 1.531603   |   2.6 |
| 20011# -37987   | 28587  | composite | 0.5929     | 1.542276   |   2.6 |
| 20011# -37991   | 28587  | prime     | 0.5924     | 7.584517   |  12.8 |
| 20011# +20023   | 28587  | composite | 0.5946     | 1.473664   |   2.5 |
| 20011# +20029   | 28587  | composite | 0.5906     | 1.480188   |   2.5 |
| 20011# +20047   | 28587  | composite | 0.5926     | 1.471659   |   2.5 |
| 20011# +20089   | 28587  | composite | 0.5908     | 1.475304   |   2.5 |
| 20011# +20101   | 28587  | composite | 0.5932     | 1.470791   |   2.5 |
| 20011# +24631   | 28587  | composite | 0.5937     | 1.548937   |   2.6 |
| 20011# +24659   | 28587  | composite | 0.5920     | 1.546309   |   2.6 |
| 20011# +24671   | 28587  | composite | 0.5920     | 1.549835   |   2.6 |
| 20011# +24677   | 28587  | composite | 0.5913     | 1.546466   |   2.6 |
| 20011# +24749   | 28587  | prime     | 0.5929     | 7.831045   |  13.2 |

