# Try to convert list of <B1, B2, number_of_curves> to
# t40, t45, t50 progress

# updated gmp-ecm to print T20 by modifying these lines in ecm.c
# -#define DIGITS_START 35
# +#define DIGITS_START 20
# -#define DIGITS_END   80
# +#define DIGITS_END   60

# References:
# https://members.loria.fr/PZimmermann/records/ecm/params.html
# https://www.rieselprime.de/ziki/Elliptic_curve_method
# https://www.mersenne.org/report_ecm/

def progress_v1(curves):
    # https://www.mersenne.org/report_ecm/
    expected_effort = {
            20: (11000, 100),
            25: (50000, 280),
            30: (250000, 640),
            35: (1000000, 1580),
            40: (3000000, 4700),
            45: (11000000, 9700),
            50: (44000000, 17100),
            55: (110000000, 46500),
            60: (260000000, 112000),
            65: (800000000, 360000),
    }

    completed = []
    for digits, (min_B1, needed) in expected_effort.items():
        complete = 0.0
        for B1, B2, count in curves:
            if B1 >= min_B1 and B2 >= 20 * min_B1:
                complete += count / needed

        if complete > 0.001:
            completed.append((digits, complete))

    status = []
    for digits, effort in completed:
        status.append("t{} x {}".format(digits, round(effort, 3)))

    print (" ".join(status))
    return completed


def progress_v2(curves):
    # Uses more complicated ECM table
    # See https://www.mersenneforum.org/showpost.php?p=575452&postcount=595
    curve_data = [[120, 12000, 4933598], [120, 50000000, 277742], [1000, 1000000, 3164, 443434], [1000, 65000, 4886, 688696], [5000, 5000000, 163, 5589, 305920], [10000, 1000000, 111, 2586, 92951, 4688656], [10000, 100000, 225, 5727, 218720], [10000, 5000000, 75, 1658, 57200, 2793065], [25000, 5000000, 36, 497, 10467, 304455], [45000, 4500000, 28, 313, 5178, 115996, 3332094], [47000, 4700000, 27, 299, 4864, 106905, 3009867], [49000, 4900000, 26, 287, 4584, 98947, 2733646], [50000, 0, 166, 2681, 58519, 1633496], [50000, 10000000, 22, 228, 3512, 74275, 1994546], [50000, 11000000, 21, 220, 3417, 71332, 1932753], [50000, 11760000, 21, 218, 3349, 70574, 1889743], [50000, 13428460, 20, 211, 3232, 67909, 1814397], [50000, 13775590, 20, 209, 3232, 67197, 1794345], [50000, 14400000, 20, 207, 3200, 66491, 1774459], [50000, 219716459349, 5, 32, 361, 5922, 130117, 3655661], [50000, 3100000, 29, 321, 5153, 111361, 3073173], [50000, 3650000, 28, 306, 4898, 105501, 2903420], [50000, 4150000, 27, 296, 4710, 101185, 2778601], [50000, 4200000, 27, 295, 4693, 100791, 2767653], [50000, 4350000, 27, 292, 4644, 99661, 2734576], [50000, 4500000, 27, 289, 4597, 98586, 2703560], [50000, 4550000, 27, 288, 4582, 98235, 2693407], [50000, 4650000, 26, 287, 4552, 97550, 2674015], [50000, 4700000, 26, 286, 4538, 97226, 2664328], [50000, 4750000, 26, 285, 4523, 96896, 2654789], [50000, 4800000, 26, 284, 4509, 96571, 2645824], [50000, 4850000, 26, 283, 4496, 96251, 2636566], [50000, 4900000, 26, 283, 4482, 95947, 2627446], [50000, 50000000, 16, 157, 2325, 47110, 1244377], [50000, 5000000, 26, 281, 4455, 95330, 2610023], [50000, 5000001, 26, 281, 4455, 95330, 2610023], [50000, 500000, 49, 589, 10027, 226392, 6467523], [50000, 50000, 166, 2681, 58519, 1633496], [50000, 5100000, 26, 279, 4429, 94741, 2592681], [50000, 5150000, 26, 279, 4416, 94447, 2584193], [50000, 5200000, 26, 278, 4404, 94157, 2576237], [50000, 5270912, 26, 277, 4386, 93753, 2564560], [50000, 5300000, 26, 277, 4379, 93590, 2559836], [50000, 5400000, 25, 275, 4355, 93048, 2543874], [50000, 5450000, 25, 275, 4343, 92777, 2536456], [50000, 5600000, 25, 273, 4309, 91995, 2513587], [50000, 5630013, 25, 272, 4302, 91840, 2509117], [50000, 5750000, 25, 271, 4276, 91232, 2491975], [50000, 5850000, 25, 269, 4255, 90750, 2477751], [50000, 5900000, 25, 269, 4244, 90508, 2471159], [50000, 6050000, 25, 267, 4213, 89809, 2450706], [50000, 6150000, 25, 266, 4193, 89350, 2437852], [50000, 6180426, 25, 266, 4187, 89212, 2433884], [50000, 6200000, 25, 265, 4184, 89124, 2431346], [50000, 6250000, 25, 265, 4174, 88901, 2424916], [50000, 6300000, 25, 264, 4164, 88690, 2418558], [50000, 6350000, 25, 264, 4155, 88472, 2412272], [50000, 6400000, 25, 263, 4145, 88256, 2406057], [50000, 6450000, 24, 263, 4136, 88043, 2400284], [50000, 6470424, 24, 262, 4133, 87956, 2397792], [50000, 6500000, 24, 262, 4127, 87832, 2394203], [50000, 6550000, 24, 262, 4118, 87623, 2388188], [50000, 6600000, 24, 261, 4109, 87426, 2382238], [50000, 6606829, 24, 261, 4108, 87398, 2381431], [50000, 6646918, 24, 261, 4100, 87234, 2376714], [50000, 6650000, 24, 261, 4100, 87222, 2376353], [50000, 6700000, 24, 260, 4091, 87020, 2370897], [50000, 6735632, 24, 260, 4085, 86877, 2366783], [50000, 6750000, 24, 260, 4083, 86820, 2365133], [50000, 6800000, 24, 259, 4074, 86622, 2359430], [50000, 6850000, 24, 259, 4065, 86426, 2353787], [50000, 6900000, 24, 258, 4057, 86241, 2348201], [50000, 7000000, 24, 257, 4040, 85859, 2337561], [50000, 7050000, 24, 257, 4032, 85671, 2332143], [50000, 7113794, 24, 256, 4022, 85433, 2325308], [50000, 7150000, 24, 256, 4016, 85309, 2321468], [50000, 7500000, 24, 253, 3962, 84075, 2286063], [50000, 8000000, 23, 238, 3695, 78420, 2111934], [51000, 5000000, 26, 277, 4358, 92511, 2511344], [51000, 5100000, 26, 275, 4333, 91929, 2494651], [60000, 6000000, 23, 235, 3464, 68650, 1734438], [65000, 5000000, 23, 233, 3362, 64822, 1588982], [65000, 6500000, 22, 218, 3112, 59692, 1456874], [70000, 7100000, 21, 202, 2812, 52337, 1237951], [70000, 7300000, 21, 201, 2790, 51890, 1226944], [74000, 7400000, 21, 193, 2628, 47849, 1105952], [75000, 10500000, 18, 169, 2240, 40291, 922391], [75000, 7500000, 20, 191, 2583, 46784, 1075609], [76620, 10000000, 18, 168, 2234, 40168, 907996], [76620, 15000000, 17, 153, 2009, 35438, 795516], [76620, 23259610, 15, 137, 1780, 31102, 692764], [76620, 24176890, 15, 136, 1763, 30784, 685295], [76620, 26954350, 15, 134, 1730, 30155, 670521], [76620, 30000000, 15, 130, 1680, 29230, 655977], [80000, 11280000, 18, 159, 2065, 36433, 807905], [80000, 8000000, 19, 172, 2264, 39765, 885959], [100000, 10000000, 17, 144, 1744, 28189, 575550], [100000, 10500000, 17, 141, 1713, 27640, 563642], [100000, 11125212, 16, 138, 1677, 27015, 550252], [100000, 11893855, 16, 137, 1659, 26707, 543658], [100000, 12255006, 16, 136, 1641, 26402, 537133], [100000, 12277371, 16, 136, 1641, 26402, 537133], [100000, 12600602, 16, 136, 1641, 26402, 537132], [100000, 12625951, 16, 136, 1641, 26402, 537132], [100000, 12700000, 16, 134, 1623, 26101, 530677], [100000, 13585673, 16, 133, 1598, 25650, 520938], [100000, 13600000, 16, 133, 1598, 25650, 520938], [100000, 13725214, 16, 133, 1598, 25650, 520938], [100000, 13800000, 16, 133, 1598, 25650, 520938], [100000, 14200000, 16, 131, 1581, 25363, 514803], [100000, 14413889, 16, 131, 1581, 25363, 514803], [150000, 20550000, 13, 95, 1002, 13863, 240913, 5074180], [199900, 19990000, 12, 83, 811, 10241, 163485, 3111212], [200000, 20000000, 12, 83, 811, 10242, 163496, 3111491], [235000, 23500000, 11, 74, 680, 8263, 123618, 2226341], [250000, 124922710, 8, 50, 433, 4956, 70940, 1226977], [250000, 125000000, 8, 50, 433, 4956, 70940, 1226977], [250000, 129632592, 8, 49, 424, 4837, 69735, 1204851], [250000, 145000000, 8, 48, 417, 4754, 67873, 1171192], [250000, 183032866, 8, 46, 397, 4500, 64011, 1111741], [250000, 25000000, 11, 71, 643, 7591, 111510, 1995945], [250000, 27500000, 11, 70, 629, 7417, 108810, 1945676], [250000, 28000000, 11, 70, 629, 7417, 108810, 1920954], [250000, 28500000, 11, 69, 623, 7417, 108810, 1920953], [250000, 29000000, 11, 69, 623, 7331, 107482, 1896511], [250000, 30000000, 11, 68, 616, 7331, 107482, 1896509], [250000, 30050537, 11, 68, 616, 7246, 107482, 1896509], [250000, 30419426, 11, 68, 616, 7246, 106169, 1872348], [250000, 31250000, 10, 67, 611, 7178, 105100, 1852387], [250000, 32250000, 10, 67, 604, 7098, 103863, 1829658], [250000, 32616915, 10, 67, 604, 7098, 103863, 1829657], [250000, 33000000, 10, 67, 598, 7098, 103863, 1829657], [250000, 33500000, 10, 67, 598, 7019, 102638, 1829657], [250000, 33750000, 10, 67, 598, 7019, 102638, 1807150], [250000, 33916012, 10, 67, 598, 7019, 102638, 1807150], [250000, 34250000, 10, 67, 598, 7019, 102638, 1807150], [250000, 34750000, 10, 66, 592, 6940, 102638, 1807149], [250000, 35000000, 10, 66, 592, 6940, 101424, 1807149], [250000, 35250000, 10, 66, 592, 6940, 101424, 1784870], [250000, 35500000, 10, 66, 592, 6940, 101424, 1784870], [250000, 35750000, 10, 66, 592, 6940, 101424, 1784869], [250000, 35880562, 10, 66, 592, 6940, 101424, 1784869], [250000, 36000000, 10, 66, 592, 6940, 101424, 1784869], [250000, 36250000, 10, 65, 585, 6940, 101424, 1784869], [250000, 36500000, 10, 65, 585, 6862, 101424, 1784869], [250000, 36750000, 10, 65, 585, 6862, 100223, 1784869], [250000, 37170685, 10, 65, 585, 6862, 100223, 1762819], [250000, 37250000, 10, 65, 585, 6862, 100223, 1762819], [250000, 37569102, 10, 65, 585, 6862, 100223, 1762818], [250000, 37750000, 10, 65, 585, 6862, 100223, 1762818], [250000, 38000000, 10, 65, 585, 6862, 100223, 1762818], [250000, 38060828, 10, 65, 579, 6862, 100223, 1762818], [250000, 38075084, 10, 65, 579, 6862, 100223, 1762818], [250000, 38104631, 10, 65, 579, 6862, 100223, 1762818], [250000, 38123960, 10, 65, 579, 6862, 100223, 1762818], [250000, 38141102, 10, 65, 579, 6862, 100223, 1762818], [250000, 38172094, 10, 65, 579, 6862, 100223, 1762818], [250000, 38250000, 10, 65, 579, 6862, 100223, 1762818], [250000, 38253153, 10, 65, 579, 6862, 100223, 1762818], [250000, 38299066, 10, 65, 579, 6785, 100223, 1762818], [250000, 38317896, 10, 65, 579, 6785, 100223, 1762818], [250000, 38357144, 10, 65, 579, 6785, 100223, 1762818], [250000, 38392042, 10, 65, 579, 6785, 100223, 1762818], [250000, 38500000, 10, 65, 579, 6785, 100223, 1762818], [250000, 38750000, 10, 65, 579, 6785, 99035, 1762817], [250000, 40000000, 10, 64, 573, 6785, 99035, 1740998], [250000, 44000000, 10, 63, 564, 6590, 96015, 1685416], [250000, 45000000, 10, 63, 558, 6518, 94903, 1665039], [250000, 50000000, 10, 61, 547, 6375, 92710, 1624887], [445657, 50000000, 9, 48, 371, 3672, 45345, 669274], [500000, 50000000, 8, 46, 347, 3328, 39808, 560749, 9325078], [500000, 500000, 34, 266, 2699, 33664, 498749, 8574135], [575781, 91549179, 7, 37, 264, 2425, 27649, 372459, 5843376], [580469, 92875040, 7, 37, 262, 2402, 27357, 368176, 5768833], [582813, 93250080, 7, 37, 262, 2401, 27080, 364194, 5700275], [586328, 94398808, 7, 37, 260, 2378, 26798, 360120, 5632282], [587500, 94587500, 7, 37, 260, 2378, 26793, 359998, 5630755], [1000000, 10000000000, 3, 14, 78, 575, 5257, 57539, 738971], [1000000, 100000000, 6, 30, 194, 1558, 15271, 179097, 2403917], [1000000, 10000000, 11, 55, 374, 3231, 33074, 397037, 5592014], [1000000, 1000000, 24, 159, 1362, 14147, 173115, 2440261], [1000000, 132000000, 6, 29, 182, 1458, 14234, 166320, 2226248], [1000000, 135000000, 6, 29, 181, 1458, 14234, 164549, 2226247], [1000000, 137000000, 6, 29, 181, 1444, 14234, 164549, 2201632], [1000000, 138000000, 6, 29, 181, 1444, 14088, 164549, 2201631], [1000000, 141609482, 6, 29, 179, 1444, 14088, 162778, 2201631], [1000000, 142484923, 6, 29, 179, 1444, 14088, 162778, 2201630], [1000000, 146000000, 6, 28, 179, 1430, 13942, 162778, 2177017], [1000000, 147000000, 6, 28, 179, 1430, 13942, 162778, 2177016], [1000000, 147657039, 6, 28, 179, 1430, 13942, 162778, 2177016], [1000000, 147716734, 6, 28, 179, 1430, 13942, 162778, 2177016], [1000000, 148352361, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148396786, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148542997, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148976761, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148992598, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148994457, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148998135, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 148998136, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 149000000, 6, 28, 177, 1430, 13942, 161009, 2177016], [1000000, 162000000, 6, 28, 176, 1402, 13650, 159241, 2127886], [1000000, 168000000, 6, 28, 174, 1387, 13650, 157478, 2103411], [1000000, 974637522, 5, 20, 119, 916, 8679, 98603, 1292071], [2100100, 200100100, 5, 22, 119, 810, 6721, 64723, 724793, 9064776], [2500000, 250000000, 5, 20, 105, 692, 5545, 51495, 548798, 6602450], [3000000, 0, 15, 80, 540, 4371, 41164, 442216, 5336010], [3000000, 1000000000, 4, 15, 72, 447, 3323, 29224, 292744, 3340724], [3000000, 100000000, 6, 23, 120, 777, 6050, 54265, 563681, 6589996], [3000000, 299857755, 5, 19, 95, 596, 4558, 40340, 413899, 4788099], [3000000, 3000000000, 4, 12, 59, 359, 2630, 22817, 227938, 2555504], [3000000, 300000000, 5, 19, 95, 596, 4558, 40340, 413899, 4788098], [3000000, 3000000, 15, 80, 540, 4371, 41164, 442216, 5336010], [3000000, 310826868, 5, 19, 94, 596, 4507, 40340, 408896, 4728691], [3000000, 321000000, 5, 19, 93, 590, 4507, 39868, 408896, 4728689], [3000000, 339000000, 5, 18, 93, 584, 4457, 39398, 403911, 4669484], [3000000, 378000000, 5, 18, 90, 560, 4266, 37644, 384972, 4440584], [3000000, 387458198, 5, 18, 89, 560, 4222, 37644, 384972, 4389542], [3000000, 394461752, 5, 18, 89, 560, 4222, 37644, 380655, 4389541], [3000000, 400000000, 5, 18, 89, 555, 4222, 37644, 380655, 4389540], [3000000, 402000000, 5, 18, 89, 555, 4222, 37235, 380655, 4389540], [3000000, 419049774, 5, 17, 88, 549, 4178, 37235, 376337, 4338461], [3000000, 439215871, 5, 17, 87, 549, 4134, 36826, 376337, 4287396], [3000000, 456000000, 5, 17, 86, 544, 4134, 36418, 372021, 4287395], [3000000, 4592487916, 3, 12, 55, 330, 2418, 20877, 206142, 2320125], [3000000, 477000000, 5, 17, 86, 539, 4090, 36418, 367712, 4236393], [3000000, 491465552, 5, 17, 86, 539, 4046, 36010, 367712, 4185509], [3000000, 492000000, 5, 17, 86, 539, 4046, 36010, 367712, 4185509], [3000000, 528000000, 4, 17, 84, 526, 3946, 35054, 353489, 4065535], [4000000, 400000000, 5, 17, 79, 475, 3413, 28608, 274181, 2920412], [6000000, 600000000, 4, 14, 64, 357, 2343, 18077, 158940, 1568067], [10000000, 1000000000, 4, 12, 48, 243, 1462, 10189, 80661, 714277, 6990452], [10000000, 100000000, 5, 19, 83, 448, 2827, 20481, 164564, 1497249], [10000000, 250000000, 5, 16, 67, 349, 2158, 15394, 124230, 1118447], [10100100, 900100100, 4, 12, 49, 245, 1475, 10282, 81387, 713370, 6971353], [11000000, 100000000000, 2, 6, 22, 101, 562, 3647, 27085, 226267, 2085926], [11000000, 1100000000, 4, 11, 45, 226, 1328, 9095, 70665, 613854, 5889715], [11000000, 110000000, 5, 18, 80, 422, 2625, 18725, 147950, 1323323], [11000000, 11000000, 9, 41, 221, 1398, 10175, 83626, 764953, 7697418], [11000000, 1276000000, 4, 11, 44, 221, 1306, 8932, 69358, 596275, 5717855], [11000000, 1500000000, 3, 11, 43, 211, 1231, 8387, 64917, 562078, 5377501], [11000000, 1639000000, 3, 11, 42, 208, 1221, 8318, 64369, 552272, 5282005], [11000000, 1672000000, 3, 10, 42, 208, 1221, 8318, 63810, 552272, 5282004], [11000000, 2024000000, 3, 10, 41, 203, 1191, 8104, 62073, 536856, 5131653], [11000000, 2500000000, 3, 10, 40, 194, 1127, 7647, 58965, 508917, 4855677], [11000000, 30114149530, 2, 7, 26, 123, 694, 4567, 34332, 288022, 2694775], [11000000, 310000000, 4, 15, 62, 319, 1915, 13407, 106152, 937272, 9122219], [11000000, 36578884662, 2, 7, 25, 118, 667, 4377, 32829, 274970, 2567970], [11000000, 500000000, 4, 13, 56, 284, 1709, 11885, 92276, 810618, 7855143], [11000000, 869000000, 4, 12, 50, 250, 1492, 10293, 80535, 694379, 6697162], [20000000, 500000000, 4, 12, 48, 225, 1249, 7828, 55220, 439626, 3784405], [23000000, 23000000, 8, 30, 144, 805, 5165, 37234, 297361, 2602003], [23000000, 81050459506, 2, 6, 19, 79, 390, 2254, 14796, 108639, 880784, 7808172], [23359695, 2335969500, 3, 9, 33, 144, 755, 4542, 30543, 230797, 1918846], [25000000, 2500000000, 3, 9, 32, 140, 724, 4292, 28727, 213922, 1751822], [30000000, 3000000000, 3, 8, 30, 127, 636, 3659, 23713, 170781, 1365262], [41000000, 4100000000, 3, 8, 26, 109, 521, 2856, 17617, 120527, 904467, 7380396], [42000000, 4200000000, 3, 8, 26, 107, 512, 2803, 17267, 117978, 884053, 7199188], [43000000, 198654756318, 2, 5, 15, 55, 250, 1302, 7704, 50822, 366825, 2904901], [43000000, 4300000000, 3, 8, 26, 106, 503, 2751, 16924, 115489, 854632, 6947923], [44000000, 100000000000, 2, 5, 16, 60, 270, 1418, 8372, 55334, 400127, 3172252], [44000000, 223505479902, 2, 5, 14, 54, 245, 1271, 7507, 49081, 355690, 2791339], [44000000, 251421670516, 2, 5, 14, 54, 240, 1247, 7310, 47744, 345595, 2709798], [44000000, 4400000000, 3, 8, 25, 103, 489, 2640, 16190, 109085, 813848, 6535917], [44000000, 44000000, 6, 23, 102, 519, 3014, 19558, 140092, 1096123, 9293359], [48000000, 251426235076, 2, 5, 14, 52, 231, 1179, 6854, 44407, 314588, 2444788], [48000000, 279380917212, 2, 5, 14, 51, 228, 1172, 6767, 43826, 312445, 2410510], [48000000, 297984687018, 2, 4, 13, 49, 215, 1098, 6322, 40769, 289493, 2230425], [48000000, 298483725556, 2, 4, 13, 49, 215, 1098, 6322, 40769, 289493, 2230425], [70000000, 13790000000, 2, 6, 19, 72, 316, 1584, 8925, 56161, 383847, 2847442], [72368421, 14256578937, 2, 6, 19, 71, 310, 1555, 8746, 54449, 367978, 2722147], [107000000, 10700000000, 2, 6, 18, 67, 280, 1335, 7172, 42154, 270589, 1898283], [109000000, 10900000000, 2, 6, 18, 66, 278, 1324, 7042, 41330, 267420, 1857169], [110000000, 10000000000000, 2, 3, 8, 25, 96, 424, 2117, 11780, 72394, 482079, 3464360], [110000000, 1000000000000, 2, 4, 10, 33, 129, 586, 2984, 16888, 104881, 711474, 5174725], [110000000, 100000000000, 2, 5, 13, 45, 183, 854, 4444, 25600, 161467, 1104799, 8187065], [110000000, 110000000000, 2, 5, 13, 45, 182, 844, 4417, 25438, 160406, 1097295, 8075601], [110000000, 11000000000, 2, 6, 18, 66, 276, 1312, 6977, 41295, 264641, 1836293], [110000000, 110000000, 5, 17, 66, 299, 1523, 8643, 53900, 365600, 2675413], [110000000, 14408226460512, 1, 3, 8, 24, 93, 408, 2035, 11301, 69007, 461008, 3307984], [110000000, 16830000000, 2, 6, 17, 61, 255, 1205, 6381, 37625, 240389, 1663590], [110000000, 2500000000, 3, 8, 24, 90, 387, 1903, 10307, 61396, 398525, 2795985], [110000000, 776278396540, 2, 4, 10, 34, 135, 614, 3135, 17884, 111314, 752662, 5482978], [110000000, 900514153782, 2, 4, 10, 33, 132, 597, 3046, 17346, 107839, 728403, 5301339], [111000000, 11100000000, 2, 6, 18, 66, 274, 1312, 6974, 40892, 261878, 1815626], [113000000, 11300000000, 2, 6, 18, 65, 272, 1290, 6847, 40094, 256448, 1776348], [160000000, 1288647750406, 2, 3, 9, 29, 108, 467, 2268, 12195, 71843, 459213, 3160653], [180000000, 180000000, 5, 15, 54, 228, 1091, 5798, 33778, 213532, 1453557], [190000000, 1676277295782, 2, 3, 8, 26, 97, 409, 1939, 10192, 58391, 364389, 2448212], [190000000, 2383889958466, 2, 3, 8, 26, 95, 401, 1893, 9947, 57218, 354956, 2384531], [260000000, 10000000000000, 1, 3, 7, 20, 70, 281, 1265, 6332, 34534, 204228, 1299371, 8830674], [260000000, 1000000000000, 2, 3, 9, 26, 95, 388, 1779, 9013, 49873, 298735, 1922624], [260000000, 251637345976, 2, 4, 10, 33, 119, 496, 2303, 11804, 65990, 398835, 2607929], [260000000, 26000000000, 2, 5, 14, 45, 171, 729, 3454, 18003, 102147, 625423, 4138677], [260000000, 260000000, 4, 13, 46, 189, 863, 4374, 24280, 146009, 944141, 6519579], [260000000, 3079973376496, 2, 3, 8, 23, 83, 335, 1521, 7650, 42057, 250476, 1603737], [500000000, 6704868340188, 2, 3, 6, 18, 60, 224, 938, 4339, 21887, 119380, 698654, 4360082], [800000000, 80000000000, 2, 4, 10, 31, 103, 385, 1605, 7329, 36237, 190903, 1084406, 6547221], [850000000, 100000000000000, 1, 2, 5, 13, 39, 134, 521, 2243, 10485, 52951, 288337, 1664274], [850000000, 10000000000000, 1, 3, 6, 16, 49, 175, 692, 3009, 14318, 73160, 400377, 2345167], [850000000, 10000000000, 2, 5, 14, 44, 153, 595, 2522, 11631, 58602, 312713, 1777657], [850000000, 14142901172416, 1, 3, 6, 15, 48, 168, 668, 2898, 13698, 70255, 383966, 2234335], [850000000, 15716618487586, 1, 3, 6, 15, 47, 168, 661, 2883, 13623, 69471, 381778, 2221086], [850000000, 85000000000, 2, 4, 10, 30, 101, 376, 1551, 7062, 34500, 181162, 1025849, 6106292], [850000000, 850000000, 4, 10, 30, 108, 434, 1919, 9236, 47962, 266767, 1579132, 9893699], [880000000, 1320000000, 3, 8, 25, 87, 330, 1386, 6321, 31106, 163881, 970556, 5784507], [880000000, 880000000, 4, 10, 30, 107, 426, 1877, 8996, 46533, 257748, 1519523, 9485456], [900000000, 0, 4, 9, 30, 106, 421, 1850, 8845, 45633, 252088, 1481685, 9223537], [900000000, 90000000000, 2, 4, 10, 30, 99, 367, 1512, 6806, 33160, 171928, 961221, 5710232], [999999999, 99999999900, 2, 4, 10, 28, 92, 338, 1372, 6081, 29161, 151531, 833775, 4869075], [1000000000, 100000000000, 2, 4, 10, 28, 92, 338, 1372, 6081, 29161, 151531, 833775, 4869075], [1000000000, 19071176724616, 1, 3, 5, 14, 44, 154, 599, 2553, 11843, 59619, 319570, 1823365], [1200000000, 1200000000, 3, 9, 27, 93, 362, 1543, 7147, 35696, 190692, 1083151, 6506965], [1320000000, 1320000000, 3, 9, 26, 90, 345, 1455, 6671, 32966, 174202, 978566, 5813083], [1500000000, 1500000000, 3, 8, 25, 85, 323, 1346, 6088, 29670, 154543, 855406, 5004783], [1600000000, 1600000000, 3, 8, 25, 83, 313, 1295, 5817, 28150, 145570, 799888, 4648955], [2147483648, 2147483648, 3, 8, 23, 74, 271, 1088, 4745, 22256, 111444, 592541, 3327432], [2900000000, 100000000000000, 1, 2, 4, 10, 29, 89, 309, 1175, 4869, 21584, 102212, 513971, 2747828], [2900000000, 105000000000000, 1, 2, 4, 10, 28, 89, 309, 1175, 4842, 21459, 102212, 513971, 2730842], [2900000000, 105101237217912, 1, 2, 4, 10, 28, 89, 309, 1175, 4842, 21459, 102212, 513971, 2730842], [2900000000, 2900000000, 3, 7, 21, 66, 235, 917, 3881, 17649, 85610, 440609, 2394122], [6000000000, 6000000000, 3, 6, 17, 51, 170, 621, 2453, 10387, 46846, 223726, 1126011, 5952396], [7600000000, 420000000000000, 1, 2, 4, 8, 20, 58, 185, 639, 2404, 9646, 41497, 189214, 904545]]

    completed = []
    for digits in range(20, 100, 5):
        index = 2 + (digits - 20) // 5

        complete = 0
        for B1, B2, count in curves:
            best = 0.0
            for row in curve_data:
                if B1 >= row[0] and B2 >= row[1] and index < len(row):
                    best = max(best, count / row[index])
            if best > 0 and digits == 75:
                print(B1, B2, 1 / (best / count))
            complete += best

        if complete > 0.001:
            completed.append((digits, complete))

    status = []
    for digits, effort in completed:
        status.append("t{} x {}".format(digits, round(effort, 3)))

    print (" ".join(status))
    return completed


# Simple cases t20 x 1, t25 x 2, t35 x 0.5
answer = progress_v1([(11000, 11000 * 100, 100)])
assert answer[0] == (20, 1.0), answer
# t20 x 1.0

answer = progress_v1([(50000, 50000 * 82, 200), (50001, 50000 * 85, 80)])
assert answer[1] == (25, 1.0), answer
# t20 x 2.8 t25 x 1.0

answer = progress_v1([(10 ** 6, 10 ** 9, 700), (10 ** 7, 10 ** 9, 90)])
assert answer[3] == (35, 0.5), answer
assert answer[4] == (40, 90 / 4700), answer
# t20 x 7.9 t25 x 2.821 t30 x 1.234 t35 x 0.5 t40 x 0.019

# B1=B2 doesn't qualify as t45 (or t35)
answer = progress_v1([(11000000, 11000000, 9700)])
assert answer[2] == (30, 9700 / 640)
assert len(answer) == 3
# t20 x 97.0 t25 x 34.643 t30 x 15.156

print()
print("v2 calculations")
progress_v1([(11000, 11000 * 100, 100)])
progress_v2([(50000, 50000 * 82, 200), (50001, 50000 * 85, 80)])
progress_v2([(10 ** 6, 10 ** 9, 700), (10 ** 7, 10 ** 9, 90)])
progress_v2([(11000000, 11000000, 9700)])


# https://www.mersenne.ca/exponent/22787
print()
print("M22787 2021/07/29")
curves = [
    (1000000,100000000,760),
    (3000000,300000000,1378),
    (11000000,1100000000,738),
    (11000000,35133391030,676),
    (43000000,240490660426,296),
]

progress_v1(curves)
progress_v2(curves)

# https://www.mersenne.ca/exponent/1277
print()
print("M1277 2022/06/06")
curves = [
        (2900000000, 105101237217912, 35762),
        (7600000000, 420000000000000, 5676),
]

progress_v2(curves)
